<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="canonical" href="https://github.com/Waikato/weka-wiki/adding_tabs_in_the_explorer/">
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Description - Weka Wiki</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Description";
    var mkdocs_page_input_path = "adding_tabs_in_the_explorer.md";
    var mkdocs_page_url = "/Waikato/weka-wiki/adding_tabs_in_the_explorer/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Weka Wiki</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../downloading_weka/">Downloading and installing Weka</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../requirements/">Requirements</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../documentation/">Documentation</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../getting_help/">Getting help</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../citing_weka/">Citing Weka</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../literature/">Literature</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../development/">Development</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../history/">History</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Resources</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../faq/">FAQ</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../not_so_faq/">Not so FAQ</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../troubleshooting/">Troubleshooting</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../using_the_api/">Using the API</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../extending_weka/">Extending Weka</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../formats_and_processing/arff/">ARFF Format</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../primer/">Primer</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../datasets/">Datasets</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../visualization_articles/">Visualization Articles</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../properties_file/">Properties File</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../packages/">Packages</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../experimenter/experimenter/">Experimenter</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Weka Wiki</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Description</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h3 id="description">Description</h3>
<p>This article explains how to add extra tabs in the Explorer in order to add new functionality without the hassle of having to dig into the Explorer code oneself. With the new plugin-architecture of the Explorer it is fairly easy making your extensions available in the GUI.</p>
<p><strong>Note:</strong> This is also covered in chapter <em>Extending WEKA</em> of the WEKA manual in versions later than 3.6.1/3.7.0 or <a href="../snapshots/">snapshots</a> of the stable-3.6/developer version later than 10/01/2010.</p>
<h3 id="version">Version</h3>
<blockquote>
<p>3.5.5 or <a href="../snapshots/">Snapshot</a></p>
</blockquote>
<h3 id="requirements">Requirements</h3>
<p>Here is roughly what is required in order to add a new tab (the examples go into more detail):</p>
<ul>
<li>your class must be derived from <code>javax.swing.JPanel</code></li>
<li>your class must implemented the interface <code>weka.gui.explorer.Explorer.ExplorerPanel</code></li>
<li>optional interfaces<ul>
<li><code>weka.gui.explorer.Explorer.LogHandler</code><blockquote>
<blockquote>
<p>in case you want to take advantage of the logging in the Explorer</p>
</blockquote>
</blockquote>
</li>
<li><code>weka.gui.explorer.Explorer.CapabilitiesFilterChangeListener</code><blockquote>
<blockquote>
<p>in case your class needs to be notified of changes in the Capabilities, e.g., if new data is loaded into the Explorer</p>
</blockquote>
</blockquote>
</li>
</ul>
</li>
<li>adding the classname of your class to the <em>Tabs</em> property in the <code>Explorer.props</code> file</li>
</ul>
<h3 id="examples">Examples</h3>
<p>The following examples demonstrate the new plugin architecture (a bold term for such a simple extension mechanism). Only the necessary details are discussed, as the full source code is available for download as well.</p>
<h4 id="sql-worksheet">SQL worksheet</h4>
<h5 id="purpose">Purpose</h5>
<p>Displaying the <strong>SqlViewer</strong> as a tab in the Explorer instead of using it either via the <em>Open DB...</em> button or as standalone application. Uses the existing components already available in Weka and just assembles them in a <code>JPanel</code>. Since this tab does not rely on a dataset being loaded into the Explorer, it will be used as a  <em>standalone</em> one.</p>
<p>Useful for people who are working a lot with databases and would like to have an SQL worksheet available all the time instead of clicking on a button every time to open up a database dialog.</p>
<h5 id="implementation">Implementation</h5>
<ul>
<li>class is derived from <code>javax.swing.JPanel</code> and implements the <code>weka.gui.explorer.Explorer.ExplorerPanel</code> interface (the full source code also imports the <code>weka.gui.explorer.Explorer.LogHandler</code> interface, but that is only additional functionality):</li>
</ul>
<pre><code class="language-java"> public class SqlPanel
   extends JPanel
   implements ExplorerPanel {
</code></pre>
<ul>
<li>some basic members that we need to have</li>
</ul>
<pre><code class="language-java">  /** the parent frame */
  protected Explorer m_Explorer = null;

  /** sends notifications when the set of working instances gets changed*/
  protected PropertyChangeSupport m_Support = new PropertyChangeSupport(this);
</code></pre>
<ul>
<li>methods we need to implement due to the used interfaces</li>
</ul>
<pre><code class="language-java">  /** Sets the Explorer to use as parent frame */
  public void setExplorer(Explorer parent) {
    m_Explorer = parent;
  }

  /** returns the parent Explorer frame */
  public Explorer getExplorer() {
    return m_Explorer;
  }

  /** Returns the title for the tab in the Explorer */
  public String getTabTitle() {
    return &quot;SQL&quot;;  * what's displayed as tab-title, e.g., *Classify//
  }

  /** Returns the tooltip for the tab in the Explorer */
  public String getTabTitleToolTip() {
    return &quot;Retrieving data from databases&quot;;  // the tooltip of the tab
  }

  /** ignored, since we *&quot;generate&quot;* data and not receive it */
  public void setInstances(Instances inst) {
  }

  /** PropertyChangeListener who will be notified of value changes. */
  public void addPropertyChangeListener(PropertyChangeListener l) {
    m_Support.addPropertyChangeListener(l);
  }

  /** Removes a PropertyChangeListener. */
  public void removePropertyChangeListener(PropertyChangeListener l) {
    m_Support.removePropertyChangeListener(l);
  }
</code></pre>
<ul>
<li>additional GUI elements</li>
</ul>
<pre><code class="language-java">  /** the actual SQL worksheet */
  protected SqlViewer m_Viewer;

  /** the panel for the buttons */
  protected JPanel m_PanelButtons;

  /** the Load button - makes the data available in the Explorer */
  protected JButton m_ButtonLoad = new JButton(&quot;Load data&quot;);

  /** displays the current query */
  protected JLabel m_LabelQuery = new JLabel(&quot;&quot;);
</code></pre>
<ul>
<li>loading the data into the Explorer by clicking on the <em>Load</em> button will fire a property change:</li>
</ul>
<pre><code class="language-java">    m_ButtonLoad.addActionListener(new ActionListener() {
      public void actionPerformed(ActionEvent evt){
        m_Support.firePropertyChange(&quot;&quot;, null, null);
      }
    });
</code></pre>
<ul>
<li>the <em>propertyChange</em> event will perform the actual loading of the data, hence we add an anonymous property change listener to our panel:</li>
</ul>
<pre><code class="language-java">  addPropertyChangeListener(new PropertyChangeListener() {
    public void propertyChange(PropertyChangeEvent e) {
      try {
        * load data
        InstanceQuery query = new InstanceQuery();
        query.setDatabaseURL(m_Viewer.getURL());
        query.setUsername(m_Viewer.getUser());
        query.setPassword(m_Viewer.getPassword());
        Instances data = query.retrieveInstances(m_Viewer.getQuery());

        * set data in preprocess panel (will also notify of capabilties changes)
        getExplorer().getPreprocessPanel().setInstances(data);
      }
      catch (Exception ex) {
        ex.printStackTrace();
      }
    }
  });
</code></pre>
<ul>
<li>In order to add our <code>SqlPanel</code> to the list of tabs displayed in the Explorer, we need to modify the <code>Explorer.props</code> file (just extract it from the <code>weka.jar</code> and place it in your home directory). The <em>Tabs</em> property must look like this:</li>
</ul>
<pre><code class="language-text"> Tabs=weka.gui.explorer.SqlPanel,\
      weka.gui.explorer.ClassifierPanel,\
      weka.gui.explorer.ClustererPanel,\
      weka.gui.explorer.AssociationsPanel,\
      weka.gui.explorer.AttributeSelectionPanel,\
      weka.gui.explorer.VisualizePanel
</code></pre>
<h5 id="screenshot">Screenshot</h5>
<p><img alt="Screenshot" src="../img/SqlPanel.png" /></p>
<h5 id="source">Source</h5>
<ul>
<li><a href="../files/SqlPanel.java">SqlPanel.java</a> (<a href="https://svn.cms.waikato.ac.nz/svn/weka/branches/stable-3-6/wekaexamples/src/main/java/wekaexamples/gui/explorer/SqlPanel.java">stable-3.6</a>, <a href="https://svn.cms.waikato.ac.nz/svn/weka/trunk/wekaexamples/src/main/java/wekaexamples/gui/explorer/SqlPanel.java">developer</a>)</li>
</ul>
<h4 id="artificial-data-generation">Artificial data generation</h4>
<h5 id="purpose_1">Purpose</h5>
<p>Instead of only having a <em>Generate...</em> button in the PreprocessPanel or using it from commandline, this example creates a new panel to be displayed as extra tab in the Explorer. This tab will be available regardless whether a dataset is already loaded or not (= <em>standalone</em>).</p>
<h5 id="implementation_1">Implementation</h5>
<ul>
<li>class is derived from <code>javax.swing.JPanel</code> and implements the <code>weka.gui.Explorer.ExplorerPanel</code> interface (the full source code also imports the <code>weka.gui.Explorer.LogHandler</code> interface, but that is only additional functionality):</li>
</ul>
<pre><code class="language-java"> public class GeneratorPanel
   extends JPanel
   implements ExplorerPanel {
</code></pre>
<ul>
<li>some basic members that we need to have (the same as for the <code>SqlPanel</code> class):</li>
</ul>
<pre><code class="language-java">  /** the parent frame */
 protected Explorer m_Explorer = null;

 /** sends notifications when the set of working instances gets changed*/
 protected PropertyChangeSupport m_Support = new PropertyChangeSupport(this);
</code></pre>
<ul>
<li>methods we need to implement due to the used interfaces (almost identical to <code>SqlPanel</code>):</li>
</ul>
<pre><code class="language-java"> /** Sets the Explorer to use as parent frame */
 public void setExplorer(Explorer parent) {
   m_Explorer = parent;
 }

 /** returns the parent Explorer frame */
 public Explorer getExplorer() {
   return m_Explorer;
 }

 /** Returns the title for the tab in the Explorer */
 public String getTabTitle() {
   return &quot;DataGeneration&quot;;  // what's displayed as tab-title, e.g., Classify
 }

 /** Returns the tooltip for the tab in the Explorer */
 public String getTabTitleToolTip() {
   return &quot;Generating artificial datasets&quot;;  // the tooltip of the tab
 }

 /** ignored, since we &quot;generate&quot; data and not receive it */
 public void setInstances(Instances inst) {
 }

 /** PropertyChangeListener who will be notified of value changes. */
 public void addPropertyChangeListener(PropertyChangeListener l) {
   m_Support.addPropertyChangeListener(l);
 }

 /** Removes a PropertyChangeListener. */
 public void removePropertyChangeListener(PropertyChangeListener l) {
   m_Support.removePropertyChangeListener(l);
 }
</code></pre>
<ul>
<li>additional GUI elements:</li>
</ul>
<pre><code class="language-java">  /** the GOE for the generators */
  protected GenericObjectEditor m_GeneratorEditor = new GenericObjectEditor();

  /** the text area for the output of the generated data */
  protected JTextArea m_Output = new JTextArea();

  /** the Generate button */
  protected JButton m_ButtonGenerate = new JButton(&quot;Generate&quot;);

  /** the Use button */
  protected JButton m_ButtonUse = new JButton(&quot;Use&quot;);
</code></pre>
<ul>
<li>the <em>Generate</em> button doesn't load the generated data directly into the Explorer, but only outputs in the <code>JTextArea</code> (this is done with the <em>Use</em> button - see further down):</li>
</ul>
<pre><code class="language-java">  m_ButtonGenerate.addActionListener(new ActionListener(){
    public void actionPerformed(ActionEvent evt){
      DataGenerator generator = (DataGenerator) m_GeneratorEditor.getValue();
      String relName = generator.getRelationName();

      String cname = generator.getClass().getName().replaceAll(&quot;.*\\.&quot;, &quot;&quot;);
      String cmd = generator.getClass().getName();
      if (generator instanceof OptionHandler)
        cmd += &quot; &quot; + Utils.joinOptions(((OptionHandler) generator).getOptions());

      try {
        * generate data
        StringWriter output = new StringWriter();
        generator.setOutput(new PrintWriter(output));
        DataGenerator.makeData(generator, generator.getOptions());
        m_Output.setText(output.toString());
      }
      catch (Exception ex) {
        ex.printStackTrace();
        JOptionPane.showMessageDialog(
          getExplorer(), &quot;Error generating data:\n&quot; + ex.getMessage(), 
          &quot;Error&quot;, JOptionPane.ERROR_MESSAGE);
      }

      generator.setRelationName(relName);
    }
  });
</code></pre>
<ul>
<li>the <em>Use</em> button finally fires a <em>property change</em> event that will load the data into the Explorer:</li>
</ul>
<pre><code class="language-java">    m_ButtonUse.addActionListener(new ActionListener(){
      public void actionPerformed(ActionEvent evt){
        m_Support.firePropertyChange(&quot;&quot;, null, null);
      }
    });
</code></pre>
<ul>
<li>the <em>propertyChange</em> event will perform the actual loading of the data, hence we add an anonymous property change listener to our panel:</li>
</ul>
<pre><code class="language-java">  addPropertyChangeListener(new PropertyChangeListener() {
    public void propertyChange(PropertyChangeEvent e) {
      try {
        Instances data = new Instances(new StringReader(m_Output.getText()));
        * set data in preprocess panel (will also notify of capabilties changes)
        getExplorer().getPreprocessPanel().setInstances(data);
      }
      catch (Exception ex) {
        ex.printStackTrace();
        JOptionPane.showMessageDialog(
          getExplorer(), &quot;Error generating data:\n&quot; + ex.getMessage(), 
          &quot;Error&quot;, JOptionPane.ERROR_MESSAGE);
      }
    }
  });
</code></pre>
<ul>
<li>In order to add our <code>GeneratorPanel</code> to the list of tabs displayed in the Explorer, we need to modify the <code>Explorer.props</code> file (just extract it from the <code>weka.jar</code> and place it in your home directory). The <em>Tabs</em> property must look like this:</li>
</ul>
<pre><code class="language-text"> Tabs=weka.gui.explorer.GeneratorPanel:standalone,\
      weka.gui.explorer.ClassifierPanel,\
      weka.gui.explorer.ClustererPanel,\
      weka.gui.explorer.AssociationsPanel,\
      weka.gui.explorer.AttributeSelectionPanel,\
      weka.gui.explorer.VisualizePanel
</code></pre>
<blockquote>
<p><strong>Note:</strong> the <em>standalone</em> option is used to make the tab available without requiring the preprocess panel to load a dataset first.</p>
</blockquote>
<h5 id="screenshot_1">Screenshot</h5>
<p><img alt="Screenshot" src="../img/GeneratorPanel.png" /></p>
<h5 id="source_1">Source</h5>
<ul>
<li><a href="../files/GeneratorPanel.java">GeneratorPanel.java</a> (<a href="https://svn.cms.waikato.ac.nz/svn/weka/branches/stable-3-6/wekaexamples/src/main/java/wekaexamples/gui/explorer/GeneratorPanel.java">stable-3.6</a>, <a href="https://svn.cms.waikato.ac.nz/svn/weka/trunk/wekaexamples/src/main/java/wekaexamples/gui/explorer/GeneratorPanel.java">developer</a>)</li>
</ul>
<h4 id="experimenter-light">Experimenter "light"</h4>
<h5 id="purpose_2">Purpose</h5>
<p>By default the <em>Classify</em> panel only performs 1 run of 10-fold cross-validation. Since most classifiers are rather sensitive to the order of the data being presented to them, those results can be too optimistic or pessimistic. Averaging the results over 10 runs with differently randomized train/test pairs returns more reliable results. And this is where this plugin comes in: 
it can be used to obtain statistical sound results for a specific classifier/dataset combination, without having to setup a whole experiment in the Experimenter. </p>
<h5 id="implementation_2">Implementation</h5>
<ul>
<li>Since this plugin is rather bulky, we omit the implementation details, but the following can be said:</li>
</ul>
<p><strong> based on the <code>weka.gui.explorer.ClassifierPanel</code>
</strong> the <em>actual</em> code doing the work follows the example in <a href="../experimenter/using_the_experiment_api/">Using the Experiment API</a> article
* In order to add our <code>ExperimentPanel</code> to the list of tabs displayed in the Explorer, we need to modify the <code>Explorer.props</code> file (just extract it from the <code>weka.jar</code> and place it in your home directory). The <em>Tabs</em> property must look like this:</p>
<pre><code class="language-text"> Tabs=weka.gui.explorer.ClassifierPanel,\
      weka.gui.explorer.ExperimentPanel,\
      weka.gui.explorer.ClustererPanel,\
      weka.gui.explorer.AssociationsPanel,\
      weka.gui.explorer.AttributeSelectionPanel,\
      weka.gui.explorer.VisualizePanel
</code></pre>
<h5 id="screenshot_2">Screenshot</h5>
<p><img alt="Screenshot" src="../img/ExperimentPanel.png" /></p>
<h5 id="source_2">Source</h5>
<ul>
<li><a href="../files/ExperimentPanel.java">ExperimentPanel.java</a> (<a href="https://svn.cms.waikato.ac.nz/svn/weka/branches/stable-3-6/wekaexamples/src/main/java/wekaexamples/gui/explorer/ExperimentPanel.java">stable-3.6</a>, <a href="https://svn.cms.waikato.ac.nz/svn/weka/trunk/wekaexamples/src/main/java/wekaexamples/gui/explorer/ExperimentPanel.java">developer</a>)</li>
</ul>
              
            </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
