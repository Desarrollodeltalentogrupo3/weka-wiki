<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://github.com/Waikato/weka-wiki/j48_weighter_patch/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Description - Weka Wiki</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Description";
        var mkdocs_page_input_path = "j48_weighter_patch.md";
        var mkdocs_page_url = "/Waikato/weka-wiki/j48_weighter_patch/";
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Weka Wiki
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../downloading_weka/">Downloading and installing Weka</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../requirements/">Requirements</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../documentation/">Documentation</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../getting_help/">Getting help</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../citing_weka/">Citing Weka</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../literature/">Literature</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../development/">Development</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../history/">History</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Resources</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../faq/">FAQ</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../not_so_faq/">Not so FAQ</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../troubleshooting/">Troubleshooting</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../using_the_api/">Using the API</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../extending_weka/">Extending Weka</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../formats_and_processing/arff/">ARFF Format</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../primer/">Primer</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../datasets/">Datasets</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../visualization_articles/">Visualization Articles</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../properties_file/">Properties File</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../packages/">Packages</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../experimenter/experimenter/">Experimenter</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Weka Wiki</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" alt="Docs"></a> &raquo;</li>
      <li>Description</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h3 id="description">Description<a class="headerlink" href="#description" title="Permanent link">#</a></h3>
<p>J48-Weighter patch: 
Modification of J48 for Weighted Data.</p>
<h3 id="reference">Reference<a class="headerlink" href="#reference" title="Permanent link">#</a></h3>
<p>-none-</p>
<h3 id="package">Package<a class="headerlink" href="#package" title="Permanent link">#</a></h3>
<p>Patches to:</p>
<ul>
<li><code>weka.classifiers.trees.j48</code></li>
<li><code>weka.core</code></li>
<li><code>weka.filters.unsupervised.attribute</code></li>
</ul>
<h3 id="download">Download<a class="headerlink" href="#download" title="Permanent link">#</a></h3>
<p>Patch for Weka 3.4.5: 
<a href="../files/j48-weighter.patch">j48-weighter.patch</a></p>
<h3 id="additional-information">Additional Information<a class="headerlink" href="#additional-information" title="Permanent link">#</a></h3>
<p>This patch addresses two separate but related issues:</p>
<ul>
<li>The proposed filter "Weighter" allows one to specify a numeric attribute to be used as an instance weight.</li>
<li>As mentioned on Wekalist, tests using weighted sample-survey data indicated possible problems in the J48 decision tree algorithm.</li>
</ul>
<h4 id="the-weighter-filter">The Weighter filter<a class="headerlink" href="#the-weighter-filter" title="Permanent link">#</a></h4>
<p>Weighter is a general-purpose filter independent of J48 or other
classifiers, but to preserve the weight assignment it initially had to
be run under FilteredClassifier.  To make weights persistent via .arff
files, some changes were made in Instances and Instance, while retaining
compatibility with the existing <a href="../formats_and_processing/arff/">ARFF</a> format.</p>
<p>Briefly, if Weighter is applied to an attribute, e.g. "fnlwgt" in the
"adult" dataset from the UCI repository, that attribute is removed and
its value is used as instance weight.  Upon Save, the weight is appended
to each instance under the attribute name "::weight::fnlwgt"; reading
the .arff file inverts the Save process, transparent to the user.</p>
<p>Repeated application of Weighter multiplies the weight and extends its
name.  The special case of invoking Weighter without an attribute
argument restores the unweighted dataset, with an appended attribute
named as above.</p>
<h4 id="j48-with-instance-weights">J48 with instance weights<a class="headerlink" href="#j48-with-instance-weights" title="Permanent link">#</a></h4>
<p>The simple rescaling inserted in weka.classifiers.trees.j48.Stats is
intended to:</p>
<ul>
<li>use the correct sample size in the normal approximation to the binomial,</li>
<li>make the scale of the .5 continuity correction consistent with the data,</li>
<li>base the minimum-leaf-count option (-M) on unweighted counts.</li>
</ul>
<p>These changes make pruning more effective with weighted data, and help
to reduce apparent overfitting.  This should be the case whether the
weights reflect missing value imputation (as is common in Weka), or
survey-sampling probabilities (e.g. "fnlwgt" in the UCI "adult"
sample).</p>
<p>The modification to j48.Stats would not have worked on its own.  In
particular, j48.Distribution had been written to maintain one set of
counts only.  To work on weighted data statistical algorithms often
require both weighted and unweighted counts.</p>
<p>A few other minor modifications were introduced to change the way "-M"
works.  One effect is that, for this purpose, instances with missing
x-values are no longer counted; they are considered missing.</p>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
