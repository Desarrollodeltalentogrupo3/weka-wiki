<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Speeding up weka - Weka Wiki</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Speeding up weka";
    var mkdocs_page_input_path = "speeding_up_weka.md";
    var mkdocs_page_url = "/Waikato/weka-wiki/speeding_up_weka/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Weka Wiki</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../downloading_weka/">Downloading and installing Weka</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../requirements/">Requirements</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../documentation/">Documentation</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../getting_help/">Getting help</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../citing_weka/">Citing Weka</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../literature/">Literature</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../development/">Development</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../history/">History</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Resources</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../faq/">FAQ</a>
                </li>
                <li class="">
                    
    <a class="" href="../not_so_faq/">Not so FAQ</a>
                </li>
                <li class="">
                    
    <a class="" href="../troubleshooting/">Troubleshooting</a>
                </li>
                <li class="">
                    
    <a class="" href="../using_the_api/">Using the API</a>
                </li>
                <li class="">
                    
    <a class="" href="../extending_weka/">Extending Weka</a>
                </li>
                <li class="">
                    
    <a class="" href="../formats_and_processing/arff/">ARFF Format</a>
                </li>
                <li class="">
                    
    <a class="" href="../primer/">Primer</a>
                </li>
                <li class="">
                    
    <a class="" href="../datasets/">Datasets</a>
                </li>
                <li class="">
                    
    <a class="" href="../visualization_articles/">Visualization Articles</a>
                </li>
                <li class="">
                    
    <a class="" href="../properties_file/">Properties File</a>
                </li>
                <li class="">
                    
    <a class="" href="../packages/">Packages</a>
                </li>
                <li class="">
                    
    <a class="" href="../experimenter/experimenter/">Experimenter</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Weka Wiki</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Speeding up weka</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <p>The following is based on a <a href="https://list.waikato.ac.nz/hyperkitty/list/wekalist@list.waikato.ac.nz/message/TJIEPO2CYGBJE5NFYPIP26SL4WFMWEZC/">post</a> 
from Eibe Frank on the Weka mailing list.</p>
<h3 id="cpu-acceleration">CPU acceleration</h3>
<p>WEKA implementations of algorithms that are based on standard linear algebra generally apply the MTJ library, which, 
optionally, can use a much faster native backend than the default pure-Java backend. Install the appropriate 
<code>netlibNative*</code> package for your platform using the WEKA package manager to get this acceleration.</p>
<p>To get further speed-ups, compile OpenBLAS or similar for your particular computer and link it with MTJ/NetlibJava, 
i.e., to make use of multi-threaded linear algebra (see info at <a href="https://github.com/fommil/netlib-java">https://github.com/fommil/netlib-java</a>). 
There is good news for Mac OS X users: OS X comes with a system-optimised library (vecLib) and all you need to do 
is install the WEKA package netlibNativeOSX* to get high-speed matrix algebra.</p>
<p>Here is a list of WEKA schemes (not sure whether itâ€™s complete) that can benefit from this (but only on sufficiently large data):</p>
<ul>
<li>GaussianProcesses</li>
<li>PrincipalComponents</li>
<li>LinearRegression</li>
<li>M5P</li>
<li>M5Rules</li>
<li>MultivariateGaussianEstimator</li>
</ul>
<p>There are also some schemes in various packages:</p>
<ul>
<li>LDA</li>
<li>QDA</li>
<li>FLDA</li>
<li>LatentSemanticAnalysis</li>
<li>Nystroem</li>
<li>RotationForest</li>
<li>LeastMedSq</li>
<li>RBFNetwork</li>
</ul>
<h3 id="gpu-acceleration">GPU acceleration</h3>
<p>Now, regarding GPUs, it's actually possible to set up a GPU-based backend for MTJ/NetlibJava. However, WEKA uses 
double-precision arithmetic and consumer-grade GPUs are optimised for single-precision arithmetic and very slow 
when using double-precision arithmetic. (Neural networks in deep learning libraries are generally trained using 
single-precision arithmetic.) Anyway, see instructions for using NVBLAS (Nvidia's BLAS wrapper) on Ubuntu 20.04 
in article <a href="../mtj_with_nvblas/">MTJ with NVBLAS</a>.</p>
<p>I tried PrincipalComponents (see instructions below for how I did this) and LDA with NVBLAS. However, in my experiments, 
only a small fraction of the BLAS operations were off-loaded to the GPU by NVBLAS, even though the names of the BLAS 
routines in <code>nvblas.log</code> are all in the list of GPU-based routines at</p>
<p><a href="https://docs.nvidia.com/cuda/nvblas/index.html#routines">https://docs.nvidia.com/cuda/nvblas/index.html#routines</a></p>
<p>Perhaps it also depends on the parameter settings of those routines as to whether they are off-loaded to the GPU. 
It seems NVBLAS uses some heuristics to guess whether it's worthwhile to use the GPU instead of the CPU for certain 
input parameters.</p>
<p>So, apart from using wekaDeeplearning4j, there is this second way of using GPUs: by applying the NVBLAS backend 
with MTJ/netlib-java.</p>
<p>The third way to use a GPU from WEKA is to install XGBoost with GPU support in Python or R (note that the GPU support 
for XGBoost was actually developed here at Waikato by Rory Mitchell!). That can then be used in WEKA via the RPlugin 
and wekaPython. In 2020, when I tried this on a Windows machine, it only worked out of the box using wekaPython though, 
and not using R. Here is an email to a colleague that I wrote at the time:</p>
<p>The fourth way to use a GPU from WEKA is to use the kerasZoo package, which has</p>
<p><a href="https://github.com/Waikato/weka-3.8/blob/master/packages/internal/kerasZoo/src/main/java/weka/classifiers/keras/KerasZooClassifier.java">https://github.com/Waikato/weka-3.8/blob/master/packages/internal/kerasZoo/src/main/java/weka/classifiers/keras/KerasZooClassifier.java</a></p>
<p>However, it may need to be updated to work with the very latest version of WEKA.</p>
<p>Finally, I suppose any installed GPU-support in R/Python for any of other the learning schemes in MLR (version 1) or 
scikit-learn should be "transparently" available in WEKA via RPlugin and wekaPython respectively.</p>
<p>Unfortunately, in contrast to the MTJ and wekaDeeplearning4j options, wekaPython or RPlugin always incurs an overheard 
(both, in terms of time and memory) by transferring the data from WEKA to R or Python respectively (and then from RAM 
to GPU device memory!).</p>
              
            </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>

</body>
</html>
