<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="canonical" href="https://github.com/Waikato/weka-wiki/using_weka_from_groovy/">
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Using weka from groovy - Weka Wiki</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Using weka from groovy";
    var mkdocs_page_input_path = "using_weka_from_groovy.md";
    var mkdocs_page_url = "/Waikato/weka-wiki/using_weka_from_groovy/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Weka Wiki</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../downloading_weka/">Downloading and installing Weka</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../requirements/">Requirements</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../documentation/">Documentation</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../getting_help/">Getting help</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../citing_weka/">Citing Weka</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../literature/">Literature</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../development/">Development</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../history/">History</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Resources</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../faq/">FAQ</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../not_so_faq/">Not so FAQ</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../troubleshooting/">Troubleshooting</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../using_the_api/">Using the API</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../extending_weka/">Extending Weka</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../formats_and_processing/arff/">ARFF Format</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../primer/">Primer</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../datasets/">Datasets</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../visualization_articles/">Visualization Articles</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../properties_file/">Properties File</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../packages/">Packages</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../experimenter/experimenter/">Experimenter</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Weka Wiki</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Using weka from groovy</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <p>Groovy...</p>
<ul>
<li>is an agile and dynamic language for the Java Virtual Machine</li>
<li>builds upon the strengths of Java but has additional power features inspired by languages like Python, Ruby and Smalltalk</li>
<li>makes modern programming features available to Java developers with almost-zero learning curve</li>
<li>supports Domain-Specific Languages and other compact syntax so your code becomes easy to read and maintain</li>
<li>makes writing shell and build scripts easy with its powerful processing primitives, OO abilities and an Ant DSL</li>
<li>increases developer productivity by reducing scaffolding code when developing web, GUI, database or console applications</li>
<li>simplifies testing by supporting unit testing and mocking out-of-the-box</li>
<li>seamlessly integrates with all existing Java objects and libraries</li>
<li>compiles straight to Java bytecode so you can use it anywhere you can use Java</li>
</ul>
<p><em>-- taken from the <a href="https://groovy-lang.org/">Groovy homepage</a></em></p>
<p>This article explains how to use Weka classes within Groovy.</p>
<h3 id="groovy-classpath">Groovy CLASSPATH</h3>
<p>Additional jars can be added to Groovy in various ways:</p>
<ul>
<li><strong><code>$GROOVY_HOME/lib</code></strong><blockquote>
<p>Any jar that is placed in this directory will be available in Groovy</p>
</blockquote>
</li>
<li><strong><code>$GROOVY_HOME/conf/groovy-starter.conf</code></strong><blockquote>
<p>This file lists jar files and directories from which to include jar files. The syntax is fairly easy:</p>
</blockquote>
</li>
</ul>
<blockquote>
<blockquote>
<p><code>load &lt;path&gt;</code></p>
<p>For example, loading the <code>weka.jar</code> that is located in $HOME/myjars:</p>
<p><code>load !{user.home}/myjars/weka.jar</code></p>
<p>Or loading all jars in a directory, e.g., $HOME/myjars:</p>
<p><code>load !{user.home}/myjars/*.jar</code></p>
</blockquote>
</blockquote>
<ul>
<li><strong>Java <code>CLASSPATH</code></strong></li>
</ul>
<blockquote>
<p>Groovy automatically imports the Java <a href="../classpath/">CLASSPATH</a>, i.e., everything that is listed in the CLASSPATH environment variable.</p>
</blockquote>
<ul>
<li><strong><code>-classpath option</code></strong></li>
</ul>
<blockquote>
<p>When running a Groovy script, you can explicitly tell Groovy, what CLASSPATH to use:</p>
<blockquote>
<p><code>groovy -classpath &lt;jars, etc=""&gt; &lt;script.groovy&gt;</code></p>
</blockquote>
</blockquote>
<h3 id="the-grape">The Grape:</h3>
<p>Groovy dependency manager </p>
<p>Grape is a JAR dependency manager embedded into Groovy. Grape lets you quickly add maven repository dependencies to your classpath, making scripting even easier. Weka can be added as a dependency in your Groovy script</p>
<p>You can also search for dependencies and versions numbers on <a href="http://mvnrepository.com/">mvnrepository.com</a> and it will provide you the <code>Grab</code> annotation form of the <code>pom.xml</code> entry.</p>
<h3 id="accessing-weka-classes-from-groovy">Accessing Weka classes from Groovy</h3>
<h4 id="requirements">Requirements</h4>
<ul>
<li>Groovy 1.5.7 or later</li>
<li>Weka 3.5.4 or later</li>
</ul>
<h4 id="implementation">Implementation</h4>
<p>If your Groovy CLASSPATH has been setup correctly, you can use all those classes in Groovy straight away. E.g., after including the <code>weka.jar</code>, I can run the following little script (<a href="../files/UsingJ48.groovy">UsingJ48.groovy</a> to train J48 on a supplied dataset and output its model:</p>
<pre><code class="language-groovy">import weka.classifiers.trees.J48
import weka.core.converters.ConverterUtils.DataSource
import weka.core.Instances

if (args.size() == 0) {
  println &quot;Usage: UsingJ48.groovy &lt;arff-file&gt;&quot;
  System.exit(0)
}

// load data and set class index
data = DataSource.read(args[0])
data.setClassIndex(data.numAttributes() - 1)

// create the model
j48 = new J48()
j48.buildClassifier(data)

// print out the built model
println j48
</code></pre>
<p>A slightly more elaborate example can be found in <a href="../files/UsingJ48Ext.groovy">UsingJ48Ext.groovy</a>, which uses more methods of the <code>weka.classifiers.Evaluation</code> class.</p>
<p><strong>NB:</strong> The example <code>UsingJ48Ext.groovy</code> needs Weka 3.6.x (or a snapshot of the developer version) to run, due to some changes in the API.</p>
<h3 id="implementing-a-groovy-classifier">Implementing a Groovy classifier</h3>
<h4 id="requirements_1">Requirements</h4>
<ul>
<li>Groovy 1.5.7 or later</li>
<li>developer version of Weka later than 3.5.8, <a href="../snapshots/">snapshots</a> later than 02/02/2009</li>
</ul>
<h4 id="implementation_1">Implementation</h4>
<p>Implementing a Groovy classifier is pretty straight-forward, since the syntax is almost the same and Java classes are imported/used in Groovy just like in Java. The <a href="../files/GeroR.groovy">GeroR.groovy</a> file re-implements the <code>weka.classifiers.rules.ZeroR</code> classifier as Groovy script.</p>
<p>The class declaration for <code>GeroR.groovy</code> looks like this, for instance:</p>
<pre><code class="language-groovy">class GeroR
  extends Classifier
  implements WeightedInstancesHandler {
    ...
}
</code></pre>
<p>For more information on implementing classifiers, see the <a href="../writing_classifier/">Writing your own Classifier</a> article.</p>
<h4 id="execution">Execution</h4>
<h5 id="groovy">Groovy</h5>
<p>As long as you have the <code>weka.jar</code> in your Groovy environment, you can directly run these scripts using the <code>groovy</code> command.
Here is an example, executing the <code>FunkyClassifier.groovy</code> script in a Linux bash:</p>
<pre><code class="language-bash">groovy -classpath weka.jar \
  /some/where/FunkyClassifier.groovy \
  -t /my/datasets/data.arff \
  &lt;more options for the Groovy script&gt;
</code></pre>
<h5 id="weka">Weka</h5>
<p>In order to execute classifiers written in Groovy, you have to use the <code>weka.classifiers.scripting.GroovyClassifier</code> classifier.
Here is an example, executing the <code>FunkyClassifier.groovy</code> script in a Linux bash:</p>
<pre><code class="language-bash">java weka.jar:groovy-all-1.5.7.jar \
  weka.classifiers.scripting.GroovyClassifier \
  -t /my/datasets/data.arff \
  -G /some/where/FunkyClassifier.groovy \
  -- &lt;more options for the Groovy script&gt;
</code></pre>
<h3 id="downloads">Downloads</h3>
<ul>
<li><a href="../files/UsingJ48.groovy">UsingJ48.groovy</a> - simple example for using J48 in a Groovy script</li>
<li><a href="../files/UsingJ48Ext.groovy">UsingJ48Ext.groovy</a> - a slightly more elaborate example script for using J48</li>
<li><a href="../files/CustomCV.groovy">CustomCV.groovy</a> thread</li>
<li><a href="../files/GeroR.groovy">GeroR.groovy</a> - <code>weka.classifiers.rules.ZeroR</code> implemented in Groovy</li>
<li><a href="../files/LibsvmWeights.groovy">LibsvmWeights.groovy</a> and outputs the best weights</li>
<li><a href="../files/multiple_eval.groovy">multiple_eval.groovy</a> - evaluates multiple classifiers on multiple train/test pairs and outputs statistics</li>
<li><a href="../files/AttributeStatistics.groovy">AttributeStatistics.groovy</a> - Outputs statistics for each attribute in a dataset</li>
</ul>
<h3 id="links">Links</h3>
<ul>
<li>Groovy<ul>
<li><a href="https://groovy-lang.org/">Homepage</a></li>
<li><a href="https://groovy-lang.org/learn.html">Getting Started</a></li>
<li><a href="https://groovy-lang.org/style-guide.html">Style Guide</a></li>
<li><a href="https://groovy-lang.org/support.html">Support</a></li>
</ul>
</li>
</ul>
              
            </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
